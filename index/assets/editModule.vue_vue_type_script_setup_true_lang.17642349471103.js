import{d as B,u as q,a as R}from"./dept.1764234947110.js";import{d as E,g as I,I as M,k as J,r,a4 as T,o as i,a as g,h as o,w as t,y as z,i as p,t as F,b as L,F as P,e as W,a0 as $,N as V,f as j}from"./index.1764234947110.js";const A={class:"system-menu-container"},G={style:{"font-size":"large"}},H={class:"dialog-footer"},X=E({__name:"editModule",props:{title:{type:String,default:()=>""}},setup(x,{expose:h}){const{proxy:c}=I(),f=M(null),e=J({isShowDialog:!1,loading:!1,ruleForm:{id:0,dept_name:"",parent:0,sort:0,status:"",leader:"",phone:"",email:""},statusOptions:[],deptOptions:[],ruleRules:{dept_name:[{required:!0,message:"部门名称不能为空",trigger:"blur"}],parent:[{required:!0,message:"父部门不能为空",trigger:"blur"}],status:[{required:!0,message:"部门状态不能为空",trigger:"blur"}],sort:[{required:!0,message:"部门顺序不能为空",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}),y=s=>{e.ruleForm=JSON.parse(JSON.stringify(s)),e.isShowDialog=!0,e.loading=!1,c.getDicts("sys_yes_no").then(l=>{e.statusOptions=l.data.data}),B().then(l=>{e.deptOptions=[];const u={id:0,dept_name:"主类目",children:[]};u.children=l.data,e.deptOptions.push(u)})},_=s=>{c.mittBus.emit("onEditDeptModule",s),e.isShowDialog=!1},v=()=>{_()},w=()=>{const s=$(f);s&&s.validate(l=>{l&&(e.loading=!0,e.ruleForm.id!=null&&e.ruleForm.id!=0?q(e.ruleForm).then(u=>{V.success("修改成功"),e.loading=!1,_(e.ruleForm)}):R(e.ruleForm).then(u=>{V.success("新增成功"),e.loading=!1,_(e.ruleForm)}))})};return h({openDialog:y}),(s,l)=>{const u=r("el-cascader"),n=r("el-form-item"),d=r("el-col"),m=r("el-input"),D=r("el-radio"),S=r("el-radio-group"),k=r("el-input-number"),O=r("el-row"),U=r("el-form"),b=r("el-button"),C=r("el-dialog"),N=T("drag");return i(),g("div",A,[o(C,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[7]||(l[7]=a=>e.isShowDialog=a),width:"769px",center:""},{header:t(()=>[z((i(),g("div",G,[p(F(x.title),1)])),[[N,[".system-menu-container .el-dialog",".system-menu-container .el-dialog__header"]]])]),footer:t(()=>[L("span",H,[o(b,{onClick:v},{default:t(()=>l[8]||(l[8]=[p("取 消")])),_:1}),o(b,{type:"primary",onClick:w,loading:e.loading},{default:t(()=>l[9]||(l[9]=[p("编 辑")])),_:1},8,["loading"])])]),default:t(()=>[o(U,{model:e.ruleForm,rules:e.ruleRules,ref_key:"ruleFormRef",ref:f,"label-width":"80px"},{default:t(()=>[o(O,{gutter:30},{default:t(()=>[o(d,{span:24},{default:t(()=>[o(n,{label:"上级部门",prop:"parentId"},{default:t(()=>[o(u,{modelValue:e.ruleForm.parent,"onUpdate:modelValue":l[0]||(l[0]=a=>e.ruleForm.parent=a),options:e.deptOptions,class:"w100",props:{value:"id",label:"dept_name",checkStrictly:!0,emitPath:!1},clearable:"",placeholder:"选择上级部门","show-all-levels":!1},null,8,["modelValue","options"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[o(n,{label:"部门名称",prop:"dept_name"},{default:t(()=>[o(m,{modelValue:e.ruleForm.dept_name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.ruleForm.dept_name=a),placeholder:"请输入部门名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[o(n,{label:"负责人"},{default:t(()=>[o(m,{modelValue:e.ruleForm.leader,"onUpdate:modelValue":l[2]||(l[2]=a=>e.ruleForm.leader=a),placeholder:"请输入负责人",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[o(n,{label:"联系电话",prop:"phone"},{default:t(()=>[o(m,{modelValue:e.ruleForm.phone,"onUpdate:modelValue":l[3]||(l[3]=a=>e.ruleForm.phone=a),placeholder:"请输入联系电话",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[o(n,{label:"联系邮箱",prop:"email"},{default:t(()=>[o(m,{modelValue:e.ruleForm.email,"onUpdate:modelValue":l[4]||(l[4]=a=>e.ruleForm.email=a),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[o(n,{label:"部门状态",prop:"status"},{default:t(()=>[o(S,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[5]||(l[5]=a=>e.ruleForm.status=a)},{default:t(()=>[(i(!0),g(P,null,W(e.statusOptions,a=>(i(),j(D,{key:a.dict_value,label:a.dict_value},{default:t(()=>[p(F(a.dict_label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[o(n,{label:"部门排序",prop:"sort"},{default:t(()=>[o(k,{modelValue:e.ruleForm.sort,"onUpdate:modelValue":l[6]||(l[6]=a=>e.ruleForm.sort=a),placeholder:"部门排序",clearable:"","controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{X as _};
