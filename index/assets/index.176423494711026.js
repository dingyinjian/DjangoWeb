import{d as L,g as j,I as A,k as G,m as H,Q as J,r as o,a4 as C,o as r,a as P,h as e,w as l,a5 as W,F as X,e as Y,i as m,b as g,y as c,f as _,t as Z,z as ee,O as k,N as te}from"./index.1764234947110.js";import{l as ae,d as le,e as ne}from"./post.1764234947110.js";import{_ as oe}from"./editModule.vue_vue_type_script_setup_true_lang.17642349471105.js";import{h as se}from"./export.1764234947110.js";const re={class:"app-container"},ie={class:"card-header"},_e=L({__name:"index",setup(de){const{proxy:y}=j(),b=A(),t=G({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,statusOptions:[],queryParams:{page:1,pageSize:10,search:"",status:void 0}}),i=()=>{t.loading=!0,ae(t.queryParams).then(n=>{t.tableData=n.data.data,t.total=n.data.total,t.loading=!1})},D=()=>{t.queryParams.search="",t.queryParams.status=void 0,i()},q=n=>{t.queryParams.page=n,i()},S=n=>{t.queryParams.pageSize=n,i()},B=n=>y.selectDictLabel(t.statusOptions,n.status),z=()=>{t.title="添加岗位",b.value.openDialog({})},E=n=>{t.title="修改岗位",b.value.openDialog(n)},x=n=>{const a=n.id||t.ids;k({message:'是否确认删除岗位编号为"'+a+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return le(a).then(()=>{i(),te.success("删除成功")})})},M=n=>{t.ids=n.map(a=>a.id),t.single=n.length!=1,t.multiple=!n.length},V=()=>{k({message:"是否确认导出所有数据项?",title:"警告",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return ne()}).then(n=>{let a=new Date().getTime()/1e3,v=parseInt(a)+"";se(n,"岗位表_"+v+".xls")})};return H(()=>{i(),y.getDicts("sys_yes_no").then(n=>{t.statusOptions=n.data.data}),y.mittBus.on("onEditPostModule",()=>{i()})}),J(()=>{y.mittBus.off("onEditPostModule")}),(n,a)=>{const v=o("el-input"),h=o("el-form-item"),O=o("el-option"),T=o("el-select"),d=o("SvgIcon"),u=o("el-button"),I=o("el-form"),w=o("el-card"),p=o("el-table-column"),F=o("el-tag"),N=o("el-popover"),R=o("el-table"),Q=o("el-divider"),U=o("el-pagination"),f=C("auth"),$=C("loading");return r(),P("div",re,[e(w,{shadow:"always"},{default:l(()=>[e(I,{model:t.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:l(()=>[e(h,{label:"关键词",prop:"postCode"},{default:l(()=>[e(v,{placeholder:"请输入岗位编码/岗位名称模糊查询",clearable:"",onKeyup:W(i,["enter"]),style:{width:"240px"},modelValue:t.queryParams.search,"onUpdate:modelValue":a[0]||(a[0]=s=>t.queryParams.search=s)},null,8,["modelValue"])]),_:1}),e(h,{label:"状态",prop:"status"},{default:l(()=>[e(T,{modelValue:t.queryParams.status,"onUpdate:modelValue":a[1]||(a[1]=s=>t.queryParams.status=s),placeholder:"岗位状态",clearable:"",style:{width:"240px"}},{default:l(()=>[(r(!0),P(X,null,Y(t.statusOptions,s=>(r(),_(O,{key:s.dict_value,label:s.dict_label,value:s.dict_value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:l(()=>[e(u,{type:"primary",plain:"",onClick:i},{default:l(()=>[e(d,{name:"elementSearch"}),a[2]||(a[2]=m(" 搜索 "))]),_:1}),e(u,{onClick:D},{default:l(()=>[e(d,{name:"elementRefresh"}),a[3]||(a[3]=m(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(w,{class:"box-card"},{header:l(()=>[g("div",ie,[a[7]||(a[7]=g("span",{class:"card-header-text"},"岗位列表",-1)),g("div",null,[c((r(),_(u,{type:"primary",plain:"",onClick:z},{default:l(()=>[e(d,{name:"elementPlus"}),a[4]||(a[4]=m(" 新增 "))]),_:1})),[[f,"system:post:add"]]),c((r(),_(u,{type:"danger",plain:"",disabled:t.multiple,onClick:x},{default:l(()=>[e(d,{name:"elementDelete"}),a[5]||(a[5]=m(" 删除 "))]),_:1},8,["disabled"])),[[f,"system:post:delete"]]),c((r(),_(u,{type:"warning",plain:"",onClick:V},{default:l(()=>[e(d,{name:"elementDownload"}),a[6]||(a[6]=m(" 导出 "))]),_:1})),[[f,"system:post:export"]])])])]),default:l(()=>[c((r(),_(R,{data:t.tableData,onSelectionChange:M},{default:l(()=>[e(p,{type:"selection",width:"55",align:"center"}),e(p,{label:"岗位编号",align:"center",prop:"id"}),e(p,{label:"岗位编码",align:"center",prop:"post_code"}),e(p,{label:"岗位名称",align:"center",prop:"post_name"}),e(p,{label:"岗位排序",align:"center",prop:"sort"}),e(p,{label:"备注",align:"center",prop:"remark"}),e(p,{label:"状态",align:"center",prop:"status"},{default:l(s=>[e(F,{type:s.row.status==="0"?"success":"danger","disable-transitions":""},{default:l(()=>[m(Z(B(s.row)),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:l(s=>[e(N,{placement:"left"},{reference:l(()=>[e(u,{type:"primary",circle:""},{default:l(()=>[e(d,{name:"elementStar"})]),_:1})]),default:l(()=>[g("div",null,[c((r(),_(u,{text:"",type:"primary",onClick:K=>E(s.row)},{default:l(()=>[e(d,{name:"elementEdit"}),a[8]||(a[8]=m(" 修改 "))]),_:2},1032,["onClick"])),[[f,"system:post:edit"]])]),g("div",null,[c((r(),_(u,{text:"",type:"primary",onClick:K=>x(s.row)},{default:l(()=>[e(d,{name:"elementDelete"}),a[9]||(a[9]=m(" 删除 "))]),_:2},1032,["onClick"])),[[f,"system:post:delete"]])])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[$,t.loading]]),c(g("div",null,[e(Q),e(U,{background:"",total:t.total,"current-page":t.queryParams.page,"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:S,onCurrentChange:q},null,8,["total","current-page","page-size"])],512),[[ee,t.total>0]])]),_:1}),e(oe,{ref_key:"editModuleRef",ref:b,title:t.title},null,8,["title"])])}}});export{_e as default};
