import{X as h,d as B,g as R,I as U,k as j,m as X,r as l,a4 as x,o as g,a as A,h as t,w as o,a5 as q,i as u,b as d,y as _,f as y,t as L,z as G,O as P,N as S}from"./index.1764234947110.js";function H(c){return h({url:"/log/logLogin/list",method:"get",params:c})}function J(c){return h({url:"/log/logLogin/"+c,method:"delete"})}function W(){return h({url:"/log/logLogin/all",method:"delete"})}const Y={class:"system-user-container app-container"},Z={class:"card-header"},$=B({name:"Logininfo"}),te=B({...$,setup(c){const{proxy:b}=R();U(null);const e=j({loading:!0,total:0,tableData:[],ids:[],single:!0,multiple:!0,title:"",statusOptions:[],queryParams:{pageNum:1,pageSize:10,loginLocation:void 0,username:void 0}}),s=()=>{e.loading=!0,H(e.queryParams).then(n=>{e.tableData=n.data.data,e.total=n.data.total,e.loading=!1})},D=()=>{e.queryParams.loginLocation=void 0,e.queryParams.username=void 0,s()},I=()=>{P({message:"是否确认清空所有登录日志数据项?",title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return W()}).then(()=>{s(),S.success("清空成功")})},z=n=>{const a=n.infoId||e.ids;P({message:'是否确认删除访问编号为"'+a+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return J(a).then(()=>{s(),S.success("删除成功")})})},k=n=>{e.queryParams.pageSize=n,s()},V=n=>{e.queryParams.pageNum=n,s()},N=(n,a)=>b.selectDictLabel(e.statusOptions,n.status),T=n=>{e.ids=n.map(a=>a.infoId),e.single=n.length!=1,e.multiple=!n.length};return X(()=>{s(),b.getDicts("sys_common_status").then(n=>{e.statusOptions=n.data})}),(n,a)=>{const w=l("el-input"),f=l("el-form-item"),p=l("SvgIcon"),m=l("el-button"),O=l("el-form"),v=l("el-card"),r=l("el-table-column"),E=l("el-tag"),F=l("el-table"),K=l("el-divider"),M=l("el-pagination"),C=x("auth"),Q=x("loading");return g(),A("div",Y,[t(v,{shadow:"always"},{default:o(()=>[t(O,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[t(f,{label:"登录地点",prop:"loginLocation"},{default:o(()=>[t(w,{placeholder:"请输入登录地点模糊查询",clearable:"",onKeyup:q(s,["enter"]),style:{width:"240px"},modelValue:e.queryParams.loginLocation,"onUpdate:modelValue":a[0]||(a[0]=i=>e.queryParams.loginLocation=i)},null,8,["modelValue"])]),_:1}),t(f,{label:"用户名称",prop:"userName"},{default:o(()=>[t(w,{placeholder:"请输入用户名称模糊查询",clearable:"",onKeyup:q(s,["enter"]),style:{width:"240px"},modelValue:e.queryParams.username,"onUpdate:modelValue":a[1]||(a[1]=i=>e.queryParams.username=i)},null,8,["modelValue"])]),_:1}),t(f,null,{default:o(()=>[t(m,{type:"primary",plain:"",onClick:s},{default:o(()=>[t(p,{name:"elementSearch"}),a[2]||(a[2]=u("搜索"))]),_:1}),t(m,{onClick:D},{default:o(()=>[t(p,{name:"elementRefresh"}),a[3]||(a[3]=u("重置"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(v,{class:"box-card"},{header:o(()=>[d("div",Z,[a[6]||(a[6]=d("span",{class:"card-header-text"},"登录日志",-1)),d("div",null,[_((g(),y(m,{type:"danger",plain:"",disabled:e.multiple,onClick:z},{default:o(()=>[t(p,{name:"elementDelete"}),a[4]||(a[4]=u("删除"))]),_:1},8,["disabled"])),[[C,"log:login:delete"]]),_((g(),y(m,{type:"danger",plain:"",onClick:I},{default:o(()=>[t(p,{name:"elementDelete"}),a[5]||(a[5]=u("清空"))]),_:1})),[[C,"log:login:clean"]])])])]),default:o(()=>[_((g(),y(F,{data:e.tableData,onSelectionChange:T},{default:o(()=>[t(r,{type:"selection",width:"55",align:"center"}),t(r,{label:"访问编号",align:"center",prop:"infoId"}),t(r,{label:"用户名称",align:"center",prop:"username"}),t(r,{label:"登录地址",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}),t(r,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),t(r,{label:"浏览器",align:"center",prop:"browser"}),t(r,{label:"操作系统",align:"center",prop:"os"}),t(r,{label:"登录状态",align:"center",prop:"status"},{default:o(i=>[t(E,{type:i.row.status==="1"?"danger":"success","disable-transitions":""},{default:o(()=>[u(L(N(i.row)),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"操作信息",align:"center",prop:"msg"}),t(r,{label:"登录日期",align:"center"},{default:o(i=>[d("span",null,L(n.dateStrFormat(i.row.createTime)),1)]),_:1})]),_:1},8,["data"])),[[Q,e.loading]]),_(d("div",null,[t(K),t(M,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-sizes":[10,20,30,40],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:k,onCurrentChange:V},null,8,["total","current-page","page-size"])],512),[[G,e.total>0]])]),_:1})])}}});export{te as default};
