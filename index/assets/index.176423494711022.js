import{d as K,g as j,I as x,k as G,m as H,Q as J,r,a4 as P,o as u,a as D,h as e,w as l,a5 as W,F as X,e as Y,i as p,b as c,y as _,f,t as Z,A as ee,z as te,O as ae,N as le}from"./index.1764234947110.js";import{l as ne,d as oe}from"./type.1764234947110.js";import re from"./editModule.17642349471107.js";import se from"./dictList.1764234947110.js";import"./editDictItem.1764234947110.js";const ie={class:"app-container"},de={class:"card-header"},ge=K({__name:"index",setup(ue){const{proxy:y}=j(),v=x(),w=x(),t=G({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,statusOptions:[{dict_value:"0",dict_label:"正常"},{dict_value:"1",dict_label:"禁用"}],queryParams:{page:1,pageSize:10,search:void 0,status:void 0},dictItemForm:[]}),s=()=>{t.loading=!0,ne(t.queryParams).then(n=>{t.tableData=n.data.data,t.total=n.data.total,t.loading=!1})},q=()=>{t.queryParams.search=void 0,t.queryParams.status=void 0,s()},S=n=>y.selectDictLabel(t.statusOptions,n.status),M=()=>{t.title="添加字典",v.value.openDialog({})},T=n=>{t.title="修改字典",v.value.openDialog(n)},h=n=>{const a=n.id||t.ids;ae({message:'是否确认删除字典编号为"'+a+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return oe(a).then(()=>{s(),le.success("删除成功")})})},B=n=>{t.ids=n.map(a=>a.id),t.single=n.length!=1,t.multiple=!n.length},I=n=>{t.queryParams.pageSize=n,s()},V=n=>{t.queryParams.page=n,s()},z=n=>{w.value.openDrawer(n)};return H(()=>{s(),y.mittBus.on("onEditPostModule",()=>{s()})}),J(()=>{y.mittBus.off("onEditPostModule")}),(n,a)=>{const E=r("el-input"),b=r("el-form-item"),O=r("el-option"),R=r("el-select"),i=r("SvgIcon"),d=r("el-button"),F=r("el-form"),C=r("el-card"),m=r("el-table-column"),N=r("el-tag"),L=r("el-popover"),Q=r("el-table"),U=r("el-divider"),$=r("el-pagination"),g=P("auth"),A=P("loading");return u(),D("div",ie,[e(C,{shadow:"always"},{default:l(()=>[e(F,{model:t.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:l(()=>[e(b,{label:"关键词",prop:"search"},{default:l(()=>[e(E,{placeholder:"请输入字典名称 类型模糊查询",clearable:"",onKeyup:W(s,["enter"]),style:{width:"240px"},modelValue:t.queryParams.search,"onUpdate:modelValue":a[0]||(a[0]=o=>t.queryParams.search=o)},null,8,["modelValue"])]),_:1}),e(b,{label:"状态",prop:"status"},{default:l(()=>[e(R,{modelValue:t.queryParams.status,"onUpdate:modelValue":a[1]||(a[1]=o=>t.queryParams.status=o),placeholder:"字典状态",clearable:"",style:{width:"240px"}},{default:l(()=>[(u(!0),D(X,null,Y(t.statusOptions,o=>(u(),f(O,{key:o.dict_value,label:o.dict_label,value:o.dict_value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(d,{type:"primary",plain:"",onClick:s},{default:l(()=>[e(i,{name:"elementSearch"}),a[2]||(a[2]=p(" 搜索 "))]),_:1}),e(d,{onClick:q},{default:l(()=>[e(i,{name:"elementRefresh"}),a[3]||(a[3]=p(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{class:"box-card"},{header:l(()=>[c("div",de,[a[6]||(a[6]=c("span",{class:"card-header-text"},"字典列表",-1)),c("div",null,[_((u(),f(d,{type:"primary",plain:"",onClick:M},{default:l(()=>[e(i,{name:"elementPlus"}),a[4]||(a[4]=p(" 新增 "))]),_:1})),[[g,"system:dictT:add"]]),_((u(),f(d,{type:"danger",plain:"",disabled:t.multiple,onClick:h},{default:l(()=>[e(i,{name:"elementDelete"}),a[5]||(a[5]=p(" 删除 "))]),_:1},8,["disabled"])),[[g,"system:dictT:delete"]])])])]),default:l(()=>[_((u(),f(Q,{border:"",data:t.tableData,onSelectionChange:B},{default:l(()=>[e(m,{type:"selection",align:"center"}),e(m,{label:"字典编号",align:"center",prop:"id"}),e(m,{label:"字典名称",align:"center",prop:"dict_name","show-overflow-tooltip":!0}),e(m,{label:"字典类型",align:"center",prop:"dict_type","show-overflow-tooltip":!0}),e(m,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(m,{label:"状态",align:"center",prop:"status"},{default:l(o=>[e(N,{type:o.row.status==="1"?"danger":"success","disable-transitions":""},{default:l(()=>[p(Z(S(o.row)),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"操作",align:"center",width:"350","class-name":"medium-padding fixed-width"},{default:l(o=>[e(L,{placement:"left"},{reference:l(()=>[e(d,{type:"primary",circle:""},{default:l(()=>[e(i,{name:"elementStar"})]),_:1})]),default:l(()=>[c("div",null,[e(d,{text:"",type:"primary",onClick:k=>z(o.row)},{default:l(()=>[e(i,{name:"elementTools"}),a[7]||(a[7]=p(" 字典配置 "))]),_:2},1032,["onClick"])]),c("div",null,[_((u(),f(d,{text:"",type:"primary",onClick:k=>T(o.row)},{default:l(()=>[e(i,{name:"elementEdit"}),a[8]||(a[8]=p(" 修改 "))]),_:2},1032,["onClick"])),[[g,"system:dictT:edit"]])]),c("div",null,[o.row.parentId!=0?_((u(),f(d,{key:0,text:"",type:"primary",onClick:k=>h(o.row)},{default:l(()=>[e(i,{name:"elementDelete"}),a[9]||(a[9]=p(" 删除 "))]),_:2},1032,["onClick"])),[[g,"system:dictT:delete"]]):ee("",!0)])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[A,t.loading]]),_(c("div",null,[e(U),e($,{background:"",total:t.total,"current-page":t.queryParams.page,"page-size":t.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:I,onCurrentChange:V},null,8,["total","current-page","page-size"])],512),[[te,t.total>0]])]),_:1}),e(re,{ref_key:"editModuleRef",ref:v,title:t.title},null,8,["title"]),e(se,{ref_key:"dictItemModuleRef",ref:w},null,512)])}}});export{ge as default};
