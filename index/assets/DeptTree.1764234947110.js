import{d as D,I as f,l as R,k as M,m as P,r as n,o as S,f as U,w as o,b as s,h as l,a0 as u,at as j,i as r,au as q,_ as z}from"./index.1764234947110.js";import{d as E}from"./dept.1764234947110.js";const F={class:"card-header"},G={class:"tree-h-flex"},H={class:"tree-h-left"},J={class:"tree-h-right"},K={style:{"margin-bottom":"45px"}},L=D({__name:"DeptTree",props:{maInit:Boolean},emits:["node-click"],setup(m,{expose:h,emit:x}){const i=f(""),a=f(),v={children:"children",label:"name"};R(i,t=>{a.value.filter(t)});const w=(t,e)=>t?e.deptName.includes(t):!0,_=M({data:[],willInit:!0}),N=async t=>{if(t=="expandAll")for(let e=0;e<a.value.store._getAllNodes().length;e++)a.value.store._getAllNodes()[e].expanded=!0;else if(t=="collapseAll")for(let e=0;e<a.value.store._getAllNodes().length;e++)a.value.store._getAllNodes()[e].expanded=!1;else t=="refresh"?await c():t=="rootNode"&&p("node-click",{deptId:"",name:""})},c=async()=>{E().then(t=>{_.data=t.data})},g=m;P(()=>{g.maInit==!1&&c()});const p=x,y=t=>{p("node-click",{id:t.id,name:t.deptName})};return h({init:async()=>{await c()}}),(t,e)=>{const k=n("el-input"),A=n("el-icon"),b=n("el-button"),d=n("el-dropdown-item"),C=n("el-dropdown-menu"),T=n("el-dropdown"),I=n("el-tree"),V=n("el-card");return S(),U(V,{class:"box-card",style:{height:"100%"},"body-style":"height: 100%;overflow: auto"},{header:o(()=>[s("div",F,[s("div",G,[s("div",H,[l(k,{"prefix-icon":u(j),modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=B=>i.value=B),placeholder:"部门名称"},null,8,["prefix-icon","modelValue"])]),s("div",J,[l(T,{onCommand:N},{dropdown:o(()=>[l(C,null,{default:o(()=>[l(d,{command:"expandAll"},{default:o(()=>e[1]||(e[1]=[r("全部展开")])),_:1}),l(d,{command:"collapseAll"},{default:o(()=>e[2]||(e[2]=[r("全部折叠")])),_:1}),l(d,{command:"rootNode"},{default:o(()=>e[3]||(e[3]=[r("根节点")])),_:1}),l(d,{command:"refresh"},{default:o(()=>e[4]||(e[4]=[r("刷新")])),_:1})]),_:1})]),default:o(()=>[l(b,{style:{"margin-left":"8px",width:"34px"}},{default:o(()=>[l(A,{class:"el-icon--center"},{default:o(()=>[l(u(q))]),_:1})]),_:1})]),_:1})])])])]),default:o(()=>[s("div",K,[l(I,{ref_key:"treeRef",ref:a,class:"filter-tree",data:_.data,props:v,"filter-node-method":w,onNodeClick:y},null,8,["data"])])]),_:1})}}});const X=z(L,[["__scopeId","data-v-7e816e7a"]]);export{X as default};
