import{d as j,g as G,I as J,k as W,p as X,m as Y,Q as Z,r as s,a4 as B,o as m,a as V,h as e,w as n,a0 as i,a5 as ee,F as te,e as ne,i as u,b as _,y as h,f,t as k,O as ae,N as le}from"./index.1764234947110.js";import{l as oe,d as se}from"./menu.1764234947110.js";import re from"./editMenu.1764234947110.js";import{t as ie}from"./transListDataToTreeData.1764234947110.js";const ue={class:"app-container"},de={class:"card-header"},ye=j({__name:"index",setup(pe){const{proxy:d}=G(),b=J(),o=W({loading:!0,menuList:[],menuOptions:[],title:"",open:!1,isHideOptions:[],statusOptions:[],menuTypeOptions:[],queryParams:{search:void 0,status:void 0,pageSize:9999,page:1}}),{loading:E,menuList:F,title:L,statusOptions:P,queryParams:y}=X(o),w=()=>{o.loading=!0,oe(o.queryParams).then(t=>{o.menuList=ie(t.data.data),o.loading=!1})},g=()=>{w()},q=()=>{o.queryParams.search=void 0,o.queryParams.status=void 0,o.queryParams.menu_type="",g()},D=t=>{o.title="添加菜单";let l=t.id;t={},t.parentId=l,b.value.openDialog(t)},T=t=>{o.title="修改菜单",b.value.openDialog(t)},I=t=>{ae({message:'是否确认删除名称为"'+t.menu_name+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return se(t.id).then(()=>{w(),le.success("删除成功")})})},S=t=>t.menu_type=="F"?"":d.selectDictLabel(o.isHideOptions,t.is_hide),N=t=>t.menu_type=="F"?"":d.selectDictLabel(o.statusOptions,t.status),H=t=>d.selectDictLabel(o.menuTypeOptions,t.menu_type);return Y(()=>{w(),d.getDicts("sys_show_hide").then(t=>{o.isHideOptions=t.data.data}),d.getDicts("sys_menu_type").then(t=>{o.menuTypeOptions=t.data.data}),d.getDicts("sys_yes_no").then(t=>{o.statusOptions=t.data.data}),d.mittBus.on("onEditMenuModule",t=>{g()})}),Z(()=>{d.mittBus.off("onEditDeptModule")}),(t,l)=>{const R=s("el-input"),x=s("el-form-item"),Q=s("el-option"),U=s("el-select"),p=s("SvgIcon"),c=s("el-button"),$=s("el-form"),M=s("el-card"),r=s("el-table-column"),C=s("el-tag"),A=s("el-popover"),K=s("el-table"),v=B("auth"),z=B("loading");return m(),V("div",ue,[e(M,{shadow:"always"},{default:n(()=>[e($,{model:i(y),ref:"queryForm",inline:!0,"label-width":"68px"},{default:n(()=>[e(x,{label:"菜单名称",prop:"menuName"},{default:n(()=>[e(R,{placeholder:"菜单名称模糊查询",clearable:"",onKeyup:ee(g,["enter"]),style:{width:"240px"},modelValue:i(y).search,"onUpdate:modelValue":l[0]||(l[0]=a=>i(y).search=a)},null,8,["modelValue"])]),_:1}),e(x,{label:"状态",prop:"status"},{default:n(()=>[e(U,{modelValue:i(y).status,"onUpdate:modelValue":l[1]||(l[1]=a=>i(y).status=a),placeholder:"菜单状态",clearable:"",style:{width:"240px"}},{default:n(()=>[(m(!0),V(te,null,ne(i(P),a=>(m(),f(Q,{key:a.dict_value,label:a.dict_label,value:a.dict_value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(x,null,{default:n(()=>[e(c,{type:"primary",plain:"",onClick:g},{default:n(()=>[e(p,{name:"elementSearch"}),l[2]||(l[2]=u(" 搜索 "))]),_:1}),e(c,{onClick:q},{default:n(()=>[e(p,{name:"elementRefresh"}),l[3]||(l[3]=u(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(M,{class:"box-card"},{header:n(()=>[_("div",de,[l[5]||(l[5]=_("span",{class:"card-header-text"},"菜单列表",-1)),_("div",null,[h((m(),f(c,{type:"primary",plain:"",onClick:D},{default:n(()=>[e(p,{name:"elementPlus"}),l[4]||(l[4]=u(" 新增 "))]),_:1})),[[v,"system:dept:add"]])])])]),default:n(()=>[h((m(),f(K,{data:i(F),"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:n(()=>[e(r,{prop:"menu_name",label:"菜单名称","show-overflow-tooltip":!0,width:"160"}),e(r,{prop:"icon",label:"图标",align:"center",width:"100"},{default:n(a=>[e(p,{name:a.row.icon},null,8,["name"])]),_:1}),e(r,{prop:"sort",label:"排序",width:"60"}),e(r,{prop:"icon",label:"分类",align:"center",width:"100"},{default:n(a=>[e(C,{type:a.row.menu_type==="M"?"danger":a.row.menu_type==="C"?"success":"warning","disable-transitions":""},{default:n(()=>[u(k(H(a.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"permission",label:"权限标识","show-overflow-tooltip":!0}),e(r,{prop:"component",label:"组件路径","show-overflow-tooltip":!0}),e(r,{prop:"path",label:"路由地址","show-overflow-tooltip":!0}),e(r,{prop:"status",label:"状态",width:"100"},{default:n(a=>[e(C,{type:a.row.status==="1"?"danger":"success","disable-transitions":""},{default:n(()=>[u(k(N(a.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"显示隐藏",width:"100"},{default:n(a=>[e(C,{type:a.row.status==="1"?"danger":"success","disable-transitions":""},{default:n(()=>[u(k(S(a.row)||"-- --"),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作",align:"center",fixed:"right"},{default:n(a=>[e(A,{placement:"left"},{reference:n(()=>[e(c,{type:"primary",circle:""},{default:n(()=>[e(p,{name:"elementStar"})]),_:1})]),default:n(()=>[_("div",null,[h((m(),f(c,{text:"",type:"primary",onClick:O=>T(a.row)},{default:n(()=>[e(p,{name:"elementEdit"}),l[6]||(l[6]=u(" 修改 "))]),_:2},1032,["onClick"])),[[v,"system:menu:edit"]])]),_("div",null,[h((m(),f(c,{text:"",type:"primary",onClick:O=>D(a.row)},{default:n(()=>[e(p,{name:"elementPlus"}),l[7]||(l[7]=u(" 新增 "))]),_:2},1032,["onClick"])),[[v,"system:menu:edit"]])]),_("div",null,[h((m(),f(c,{text:"",type:"primary",onClick:O=>I(a.row)},{default:n(()=>[e(p,{name:"elementDelete"}),l[8]||(l[8]=u(" 删除 "))]),_:2},1032,["onClick"])),[[v,"system:menu:delete"]])])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[z,i(E)]])]),_:1}),e(re,{ref_key:"editMenuRef",ref:b,title:i(L)},null,8,["title"])])}}});export{ye as default};
