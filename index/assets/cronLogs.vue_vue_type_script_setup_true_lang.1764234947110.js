import{d as j,k as B,r as l,a4 as w,o as m,a as b,h as a,w as o,y as u,i as _,t as K,a5 as c,f as U,z as J,b as O}from"./index.1764234947110.js";import{l as Q}from"./job.1764234947110.js";const R={class:"system-job-container"},T={style:{"font-size":"large"}},L=j({__name:"cronLogs",props:{title:{type:String,default:()=>""}},setup(h,{expose:k}){const e=B({isShowDialog:!1,loading:!1,tableData:[],total:0,queryParams:{page:1,pageSize:10,periodic_task_name:void 0,task_name:void 0,task_id:void 0}}),v=()=>{e.queryParams.periodic_task_name=void 0,e.queryParams.task_name=void 0,e.queryParams.task_id=void 0,s()},s=()=>{e.loading=!0,Q(e.queryParams).then(n=>{e.tableData=n.data.data,e.total=n.data.total,e.loading=!1})},q=n=>{e.queryParams.periodic_task_name=JSON.parse(JSON.stringify(n)).name,s(),e.isShowDialog=!0,e.loading=!1},P=n=>{e.queryParams.pageSize=n,s()},S=n=>{e.queryParams.page=n,s()};return k({openDialog:q}),(n,t)=>{const p=l("el-input"),d=l("el-form-item"),g=l("SvgIcon"),y=l("el-button"),V=l("el-form"),f=l("el-card"),r=l("el-table-column"),D=l("el-table"),x=l("el-divider"),C=l("el-pagination"),z=l("el-dialog"),I=w("drag"),N=w("loading");return m(),b("div",R,[a(z,{modelValue:e.isShowDialog,"onUpdate:modelValue":t[3]||(t[3]=i=>e.isShowDialog=i),top:"20px",width:"75%",center:""},{header:o(()=>[u((m(),b("div",T,[_(K(h.title),1)])),[[I,[".system-job-container .el-dialog",".system-job-container .el-dialog__header"]]])]),default:o(()=>[a(f,{shadow:"always"},{default:o(()=>[a(V,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:o(()=>[a(d,{label:"任务名称",prop:"periodic_task_name"},{default:o(()=>[a(p,{placeholder:"请输入任务名称模糊查询",clearable:"",onKeyup:c(s,["enter"]),style:{width:"240px"},modelValue:e.queryParams.periodic_task_name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.queryParams.periodic_task_name=i)},null,8,["modelValue"])]),_:1}),a(d,{label:"执行方法",prop:"task_name"},{default:o(()=>[a(p,{placeholder:"请输入任务执行方法",clearable:"",onKeyup:c(s,["enter"]),style:{width:"240px"},modelValue:e.queryParams.task_name,"onUpdate:modelValue":t[1]||(t[1]=i=>e.queryParams.task_name=i)},null,8,["modelValue"])]),_:1}),a(d,{label:"任务ID",prop:"task_id"},{default:o(()=>[a(p,{placeholder:"请输入任务ID",clearable:"",onKeyup:c(s,["enter"]),style:{width:"240px"},modelValue:e.queryParams.task_id,"onUpdate:modelValue":t[2]||(t[2]=i=>e.queryParams.task_id=i)},null,8,["modelValue"])]),_:1}),a(d,null,{default:o(()=>[a(y,{type:"primary",plain:"",onClick:s},{default:o(()=>[a(g,{name:"elementSearch"}),t[4]||(t[4]=_(" 搜索 "))]),_:1}),a(y,{onClick:v},{default:o(()=>[a(g,{name:"elementRefresh"}),t[5]||(t[5]=_(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(f,{class:"box-card"},{default:o(()=>[u((m(),U(D,{data:e.tableData},{default:o(()=>[a(r,{label:"序号",width:"55",prop:"id"}),a(r,{label:"任务ID",width:"160",align:"center",prop:"task_id"}),a(r,{label:"任务名称",align:"center",prop:"periodic_task_name","show-overflow-tooltip":!0}),a(r,{label:"执行参数",align:"center",prop:"task_kwargs","show-overflow-tooltip":!0}),a(r,{label:"执行方法",align:"center",prop:"task_name","show-overflow-tooltip":!0}),a(r,{label:"执行状态",align:"center",prop:"status","show-overflow-tooltip":!0}),a(r,{label:"执行结果",width:"200",align:"center",prop:"result","show-overflow-tooltip":!0}),a(r,{label:"创建时间",align:"center",prop:"date_created","show-overflow-tooltip":!0}),a(r,{label:"完成时间",align:"center",prop:"date_done","show-overflow-tooltip":!0})]),_:1},8,["data"])),[[N,e.loading]]),u(O("div",null,[a(x),a(C,{background:"",total:e.total,"current-page":e.queryParams.page,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:P,onCurrentChange:S},null,8,["total","current-page","page-size"])],512),[[J,e.total>0]])]),_:1})]),_:1},8,["modelValue"])])}}});export{L as _};
