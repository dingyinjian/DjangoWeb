import{X as m,d as v,g as I,I as q,k as L,r as s,a4 as J,o as d,a as _,h as o,w as t,y as z,i as p,t as b,b as T,F as k,e as S,a0 as W,N as w,f as D}from"./index.1764234947110.js";function Q(a){return m({url:"/resource/email/list",method:"get",params:a})}function X(a){return m({url:"/resource/email",method:"post",data:a})}function j(a){return m({url:"/resource/email",method:"put",data:a})}function Y(a){return m({url:"/resource/email/"+a,method:"delete"})}function Z(a){return m({url:"/resource/email/changeStatus",method:"put",data:a})}function $(a){return m({url:"/resource/email/debugMail",method:"post",data:a})}const A={class:"system-menu-container"},G={style:{"font-size":"large"}},H={class:"dialog-footer"},K=v({name:"editResEmails"}),ee=v({...K,props:{title:{type:String,default:()=>""}},setup(a,{expose:R}){const{proxy:g}=I(),F=q(null),e=L({isShowDialog:!1,loading:!1,ruleForm:{mailId:0,category:"",host:"",port:0,from:"",nickname:"",secret:"",isSsl:!1,status:"0"},statusOptions:[],mailOptions:[],ruleRules:{host:[{required:!0,message:"邮件服务器不能为空",trigger:"blur"}],port:[{required:!0,message:"端口号不能为空",trigger:"blur"}],from:[{required:!0,message:"账号不能为空",trigger:"blur"}],secret:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}),E=u=>{e.ruleForm=JSON.parse(JSON.stringify(u)),e.isShowDialog=!0,e.loading=!1,g.getDicts("sys_normal_disable").then(l=>{e.statusOptions=l.data}),g.getDicts("res_mail_category").then(l=>{e.mailOptions=l.data})},V=u=>{g.mittBus.emit("onEditResEmailsModule",u),e.isShowDialog=!1},x=()=>{V()},O=()=>{const u=W(F);u&&u.validate(l=>{l&&(e.loading=!0,e.ruleForm.mailId!=null&&e.ruleForm.mailId!=0?j(e.ruleForm).then(c=>{w.success("修改成功"),e.loading=!1,V(e.ruleForm)}):X(e.ruleForm).then(c=>{w.success("新增成功"),e.loading=!1,V(e.ruleForm)}))})};return R({openDialog:E}),(u,l)=>{const c=s("el-radio"),y=s("el-radio-group"),n=s("el-form-item"),i=s("el-col"),f=s("el-input"),U=s("el-input-number"),C=s("el-row"),M=s("el-form"),h=s("el-button"),N=s("el-dialog"),B=J("drag");return d(),_("div",A,[o(N,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[7]||(l[7]=r=>e.isShowDialog=r),width:"769px",center:""},{header:t(()=>[z((d(),_("div",G,[p(b(a.title),1)])),[[B,[".system-menu-container .el-dialog",".system-menu-container .el-dialog__header"]]])]),footer:t(()=>[T("span",H,[o(h,{onClick:x},{default:t(()=>l[8]||(l[8]=[p("取 消")])),_:1}),o(h,{type:"primary",onClick:O,loading:e.loading},{default:t(()=>l[9]||(l[9]=[p("编 辑")])),_:1},8,["loading"])])]),default:t(()=>[o(M,{model:e.ruleForm,rules:e.ruleRules,ref_key:"ruleFormRef",ref:F,"label-width":"80px"},{default:t(()=>[o(C,{gutter:35},{default:t(()=>[o(i,{span:24},{default:t(()=>[o(n,{label:"Mail分类",prop:"category"},{default:t(()=>[o(y,{modelValue:e.ruleForm.category,"onUpdate:modelValue":l[0]||(l[0]=r=>e.ruleForm.category=r)},{default:t(()=>[(d(!0),_(k,null,S(e.mailOptions,r=>(d(),D(c,{key:r.dictValue,label:r.dictValue},{default:t(()=>[p(b(r.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(i,{span:24},{default:t(()=>[o(n,{label:"用户名称",prop:"from"},{default:t(()=>[o(f,{modelValue:e.ruleForm.from,"onUpdate:modelValue":l[1]||(l[1]=r=>e.ruleForm.from=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})]),_:1}),o(i,{span:24},{default:t(()=>[o(n,{label:"密码",prop:"secret"},{default:t(()=>[o(f,{modelValue:e.ruleForm.secret,"onUpdate:modelValue":l[2]||(l[2]=r=>e.ruleForm.secret=r),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})]),_:1}),o(i,{span:24},{default:t(()=>[o(n,{label:"主机地址",prop:"host"},{default:t(()=>[o(f,{modelValue:e.ruleForm.host,"onUpdate:modelValue":l[3]||(l[3]=r=>e.ruleForm.host=r),placeholder:"请输入主机地址"},null,8,["modelValue"])]),_:1})]),_:1}),o(i,{span:24},{default:t(()=>[o(n,{label:"端口",prop:"port"},{default:t(()=>[o(U,{modelValue:e.ruleForm.port,"onUpdate:modelValue":l[4]||(l[4]=r=>e.ruleForm.port=r),min:10},null,8,["modelValue"])]),_:1})]),_:1}),o(i,{span:24},{default:t(()=>[o(n,{label:"发件人",prop:"nickname"},{default:t(()=>[o(f,{modelValue:e.ruleForm.nickname,"onUpdate:modelValue":l[5]||(l[5]=r=>e.ruleForm.nickname=r),placeholder:"请输入发件人"},null,8,["modelValue"])]),_:1})]),_:1}),o(i,{span:24},{default:t(()=>[o(n,{label:"状态",prop:"status"},{default:t(()=>[o(y,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[6]||(l[6]=r=>e.ruleForm.status=r)},{default:t(()=>[(d(!0),_(k,null,S(e.statusOptions,r=>(d(),D(c,{key:r.dictValue,label:r.dictValue},{default:t(()=>[p(b(r.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{ee as _,Y as a,Z as c,$ as d,Q as l};
