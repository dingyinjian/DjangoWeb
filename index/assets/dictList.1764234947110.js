import{g as F,I as O,k as L,m as Q,Q as R,p as W,al as N,O as T,am as U,N as x,_ as z,r as i,a4 as B,o as d,f as m,w as a,b as y,h as e,a5 as K,a as A,e as j,F as G,i as p,y as b,t as H}from"./index.1764234947110.js";import J from"./editDictItem.1764234947110.js";const X={name:"dictList",components:{editDictItem:J},setup(){const{proxy:o}=F(),l=O(),n=L({loading:!0,title:"",tableData:[],isShowDrawer:!1,direction:"rtl",screenWidth:800,statusOptions:[{dictValue:"0",dictLabel:"正常"},{dictValue:"1",dictLabel:"禁用"}],queryParams:{dict_type:void 0,search:void 0,status:void 0}}),u=t=>{g(),n.queryParams.dict_type=t.dict_type,o.getDicts(t.dict_type).then(s=>{n.tableData=s.data.data,n.loading=!1}),n.isShowDrawer=!0},_=()=>{n.loading=!0,N(n.queryParams).then(t=>{n.tableData=t.data.data,n.loading=!1})},g=()=>{let t=document.body.clientWidth;t<600?n.screenWidth=t:n.screenWidth=600},D=()=>{n.queryParams.search=void 0,n.queryParams.status=void 0,_()},f=t=>{t={},t.dict_type=n.queryParams.dict_type,n.title="添加字典数据",l.value.openDialog(t)},w=t=>{n.title="修改字典数据",l.value.openDialog(t)},v=t=>{const s=t.id;T({message:'是否确认删除字典编号为"'+s+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return U(s).then(()=>{_(),x.success("删除成功")})})};return Q(()=>{o.mittBus.on("onEditDictItemModule",t=>{_()})}),R(()=>{o.mittBus.off("onEditDictItemModule")}),{dictItemModuleRef:l,resetScreenSize:g,onOpenAddModule:f,onOpenEditModule:w,onTabelRowDel:v,resetQuery:D,openDrawer:u,handleQuery:_,...W(n)}}},Y={style:{padding:"10px",border:"1px solid #e9e9e9",background:"#fff"}};function Z(o,l,n,u,_,g){const D=i("el-input"),f=i("el-form-item"),w=i("el-option"),v=i("el-select"),t=i("SvgIcon"),s=i("el-button"),C=i("el-row"),E=i("el-form"),c=i("el-table-column"),k=i("el-tag"),V=i("el-popover"),q=i("el-table"),P=i("editDictItem"),I=i("el-drawer"),h=B("auth"),M=B("loading");return d(),m(I,{title:"字典列表",direction:o.direction,size:o.screenWidth,modelValue:o.isShowDrawer,"onUpdate:modelValue":l[2]||(l[2]=r=>o.isShowDrawer=r)},{default:a(()=>[y("div",Y,[e(E,{model:o.queryParams,ref:"queryForm",inline:!0},{default:a(()=>[e(C,null,{default:a(()=>[e(f,{label:"标签",prop:"dictName"},{default:a(()=>[e(D,{placeholder:"标签查询",clearable:"",onKeyup:K(u.handleQuery,["enter"]),modelValue:o.queryParams.search,"onUpdate:modelValue":l[0]||(l[0]=r=>o.queryParams.search=r)},null,8,["onKeyup","modelValue"])]),_:1}),e(f,{label:"状态",prop:"status"},{default:a(()=>[e(v,{modelValue:o.queryParams.status,"onUpdate:modelValue":l[1]||(l[1]=r=>o.queryParams.status=r),placeholder:"状态",clearable:""},{default:a(()=>[(d(!0),A(G,null,j(o.statusOptions,r=>(d(),m(w,{key:r.dictValue,label:r.dictLabel,value:r.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:a(()=>[e(s,{type:"primary",onClick:u.handleQuery},{default:a(()=>[e(t,{name:"elementSearch"}),l[3]||(l[3]=p("搜索"))]),_:1},8,["onClick"]),e(s,{onClick:u.resetQuery},{default:a(()=>[e(t,{name:"elementRefresh"}),l[4]||(l[4]=p("重置"))]),_:1},8,["onClick"]),b((d(),m(s,{style:{"margin-bottom":"10px","margin-top":"10px"},type:"primary",onClick:u.onOpenAddModule},{default:a(()=>[e(t,{name:"elementPlus"}),l[5]||(l[5]=p("新增"))]),_:1},8,["onClick"])),[[h,"system:dictD:add"]])]),_:1})]),_:1})]),_:1},8,["model"])]),y("div",null,[b((d(),m(q,{data:o.tableData},{default:a(()=>[e(c,{label:"键值",align:"center",prop:"dict_value","show-overflow-tooltip":!0}),e(c,{label:"标签",align:"center",prop:"dict_label","show-overflow-tooltip":!0}),e(c,{label:"类型",align:"center",prop:"dict_type","show-overflow-tooltip":!0}),e(c,{label:"状态",align:"center",prop:"status"},{default:a(r=>[e(k,{type:r.row.status==="1"?"danger":"success","disable-transitions":""},{default:a(()=>[p(H(r.row.status==="1"?"停用":"正常"),1)]),_:2},1032,["type"])]),_:1}),e(c,{label:"排序",align:"center",width:"50",prop:"sort"}),e(c,{label:"操作",align:"center",width:"150","class-name":"medium-padding fixed-width"},{default:a(r=>[e(V,{placement:"left"},{reference:a(()=>[e(s,{type:"primary",circle:""},{default:a(()=>[e(t,{name:"elementStar"})]),_:1})]),default:a(()=>[y("div",null,[b((d(),m(s,{text:"",type:"primary",onClick:S=>u.onOpenEditModule(r.row)},{default:a(()=>[e(t,{name:"elementEdit"}),l[6]||(l[6]=p("修改"))]),_:2},1032,["onClick"])),[[h,"system:dictD:edit"]])]),y("div",null,[b((d(),m(s,{text:"",type:"primary",onClick:S=>u.onTabelRowDel(r.row)},{default:a(()=>[e(t,{name:"elementDelete"}),l[7]||(l[7]=p("删除"))]),_:2},1032,["onClick"])),[[h,"system:dictD:delete"]])])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[M,o.loading]])]),e(P,{ref:"dictItemModuleRef",title:o.title},null,8,["title"])]),_:1},8,["direction","size","modelValue"])}const te=z(X,[["render",Z]]);export{te as default};
