import{d as $,g as j,I as A,k as G,m as H,Q as J,r as i,a4 as P,o as d,a as x,h as t,w as l,a5 as q,F as W,e as X,i as c,b as m,y as g,f,t as k,z as Y,O as Z,N as ee}from"./index.1764234947110.js";import{_ as te,l as ae,d as le}from"./editModule.vue_vue_type_script_setup_true_lang.17642349471102.js";const ne={class:"app-container"},oe={class:"card-header"},de=$({__name:"index",setup(ie){const{proxy:y}=j(),b=A(),e=G({loading:!0,ids:[],single:!0,multiple:!0,title:"",tableData:[],total:0,typeOptions:[],queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0}}),r=()=>{e.loading=!0,ae(e.queryParams).then(n=>{e.tableData=n.data.data,e.total=n.data.total,e.loading=!1})},V=()=>{e.queryParams.configName=void 0,e.queryParams.configKey=void 0,e.queryParams.configType=void 0,r()},S=(n,a)=>y.selectDictLabel(e.typeOptions,n.configType),T=()=>{e.title="添加配置参数",b.value.openDialog({})},D=n=>{e.title="修改配置参数",b.value.openDialog(n)},w=n=>{const a=n.configId||e.ids;Z({message:'是否确认删除配置参数编号为"'+a+'"的数据项?',title:"警告",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return le(a).then(()=>{r(),ee.success("删除成功")})})},N=n=>{e.ids=n.map(a=>a.configId),e.single=n.length!=1,e.multiple=!n.length},B=n=>{e.queryParams.pageSize=n,r()},z=n=>{e.queryParams.pageNum=n,r()};return H(()=>{r(),y.getDicts("sys_yes_no").then(n=>{e.typeOptions=n.data}),y.mittBus.on("onEditPostModule",n=>{r()})}),J(()=>{y.mittBus.off("onEditPostModule")}),(n,a)=>{const h=i("el-input"),_=i("el-form-item"),K=i("el-option"),M=i("el-select"),p=i("SvgIcon"),u=i("el-button"),I=i("el-form"),C=i("el-card"),s=i("el-table-column"),E=i("el-tag"),O=i("el-popover"),F=i("el-table"),R=i("el-divider"),U=i("el-pagination"),v=P("auth"),L=P("loading");return d(),x("div",ne,[t(C,{shadow:"always"},{default:l(()=>[t(I,{model:e.queryParams,ref:"queryForm",inline:!0,"label-width":"68px"},{default:l(()=>[t(_,{label:"参数名称",prop:"configName"},{default:l(()=>[t(h,{placeholder:"参数名称模糊查询",clearable:"",onKeyup:q(r,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.queryParams.configName=o)},null,8,["modelValue"])]),_:1}),t(_,{label:"参数键名",prop:"configKey"},{default:l(()=>[t(h,{placeholder:"参数键名模糊查询",clearable:"",onKeyup:q(r,["enter"]),style:{width:"240px"},modelValue:e.queryParams.configKey,"onUpdate:modelValue":a[1]||(a[1]=o=>e.queryParams.configKey=o)},null,8,["modelValue"])]),_:1}),t(_,{label:"系统内置",prop:"configType"},{default:l(()=>[t(M,{modelValue:e.queryParams.configType,"onUpdate:modelValue":a[2]||(a[2]=o=>e.queryParams.configType=o),placeholder:"系统内置",clearable:"",style:{width:"240px"}},{default:l(()=>[(d(!0),x(W,null,X(e.typeOptions,o=>(d(),f(K,{key:o.dictValue,label:o.dictLabel,value:o.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:l(()=>[t(u,{type:"primary",plain:"",onClick:r},{default:l(()=>[t(p,{name:"elementSearch"}),a[3]||(a[3]=c(" 搜索 "))]),_:1}),t(u,{onClick:V},{default:l(()=>[t(p,{name:"elementRefresh"}),a[4]||(a[4]=c(" 重置 "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(C,{class:"box-card"},{header:l(()=>[m("div",oe,[a[7]||(a[7]=m("span",{class:"card-header-text"},"配置列表",-1)),m("div",null,[g((d(),f(u,{type:"primary",plain:"",onClick:T},{default:l(()=>[t(p,{name:"elementPlus"}),a[5]||(a[5]=c(" 新增 "))]),_:1})),[[v,"system:config:add"]]),g((d(),f(u,{type:"danger",plain:"",disabled:e.multiple,onClick:w},{default:l(()=>[t(p,{name:"elementDelete"}),a[6]||(a[6]=c(" 删除 "))]),_:1},8,["disabled"])),[[v,"system:config:delete"]])])])]),default:l(()=>[g((d(),f(F,{data:e.tableData,onSelectionChange:N},{default:l(()=>[t(s,{type:"selection",width:"55",align:"center"}),t(s,{label:"参数主键",align:"center",prop:"configId"}),t(s,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),t(s,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),t(s,{label:"参数键值",align:"center",prop:"configValue"}),t(s,{label:"系统内置",align:"center",prop:"configType"},{default:l(o=>[t(E,{type:o.row.configType==="1"?"danger":"success","disable-transitions":""},{default:l(()=>[c(k(S(o.row)),1)]),_:2},1032,["type"])]),_:1}),t(s,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),t(s,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:l(o=>[m("span",null,k(n.dateStrFormat(o.row.createTime)),1)]),_:1}),t(s,{label:"操作",align:"center",width:"200","class-name":"medium-padding fixed-width"},{default:l(o=>[t(O,{placement:"left"},{reference:l(()=>[t(u,{type:"primary",circle:""},{default:l(()=>[t(p,{name:"elementStar"})]),_:1})]),default:l(()=>[m("div",null,[g((d(),f(u,{text:"",type:"primary",onClick:Q=>D(o.row)},{default:l(()=>[t(p,{name:"elementEdit"}),a[8]||(a[8]=c(" 修改 "))]),_:2},1032,["onClick"])),[[v,"system:config:edit"]])]),m("div",null,[g((d(),f(u,{text:"",type:"primary",onClick:Q=>w(o.row)},{default:l(()=>[t(p,{name:"elementDelete"}),a[9]||(a[9]=c(" 删除 "))]),_:2},1032,["onClick"])),[[v,"system:config:delete"]])])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[L,e.loading]]),g(m("div",null,[t(R),t(U,{background:"",total:e.total,"current-page":e.queryParams.pageNum,"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:z},null,8,["total","current-page","page-size"])],512),[[Y,e.total>0]])]),_:1}),t(te,{ref_key:"editModuleRef",ref:b,title:e.title},null,8,["title"])])}}});export{de as default};
