import{c as T,i as V}from"./table.1764234947110.js";import{g as z,k as B,p as L,N as E,_ as Q,r as i,a4 as F,o as C,a as w,h as a,w as t,y as h,i as d,t as f,b as y,a5 as v,f as I,z as K}from"./index.1764234947110.js";const R={name:"importTable",props:{title:{type:String,default:()=>""}},setup(){const{proxy:o}=z(),e=B({isShowDialog:!1,loading:!1,btnLoading:!1,visible:!1,tables:[],total:0,dbTableList:[],queryParams:{pageNum:1,pageSize:999,tableName:void 0,tableComment:void 0}}),s=()=>{e.loading=!0,T(e.queryParams).then(l=>{e.dbTableList=l.data.data,e.total=l.data.total,e.loading=!1})},n=l=>{s(),e.isShowDialog=!0,e.btnLoading=!1},_=()=>{e.queryParams.tableName=void 0,e.queryParams.tableComment=void 0,s()},m=l=>{o.mittBus.emit("onEditTableModule",l),e.tables=[],e.isShowDialog=!1};return{openDialog:n,closeDialog:m,onCancel:()=>{m()},resetQuery:_,handleQuery:s,handleSelectionChange:l=>{e.tables=l.map(c=>c.tableName)},onSubmit:()=>{e.btnLoading=!0,V({tables:e.tables.join(",")}).then(l=>{E.success("导入成功"),e.btnLoading=!1,m()})},handleCurrentChange:l=>{e.queryParams.pageNum=l,s()},handleSizeChange:l=>{e.queryParams.pageSize=l,s()},...L(e)}}},U={class:"system-menu-container"},A={style:{"font-size":"large"}},M={class:"dialog-footer"};function j(o,e,s,n,_,m){const g=i("el-input"),p=i("el-form-item"),b=i("SvgIcon"),u=i("el-button"),S=i("el-form"),l=i("el-table-column"),c=i("el-table"),D=i("pagination"),k=i("el-row"),q=i("el-dialog"),N=F("drag"),P=F("loading");return C(),w("div",U,[a(q,{modelValue:o.isShowDialog,"onUpdate:modelValue":e[2]||(e[2]=r=>o.isShowDialog=r),width:"769px"},{header:t(()=>[h((C(),w("div",A,[d(f(s.title),1)])),[[N,[".system-menu-container .el-dialog",".system-menu-container .el-dialog__header"]]])]),footer:t(()=>[y("span",M,[a(u,{onClick:n.onCancel},{default:t(()=>e[5]||(e[5]=[d("取 消")])),_:1},8,["onClick"]),a(u,{type:"primary",onClick:n.onSubmit,loading:o.btnLoading},{default:t(()=>e[6]||(e[6]=[d("确 定")])),_:1},8,["onClick","loading"])])]),default:t(()=>[a(S,{model:o.queryParams,inline:!0,"label-width":"60px"},{default:t(()=>[a(p,{label:"表名称",style:{width:"220px"},prop:"tableName"},{default:t(()=>[a(g,{modelValue:o.queryParams.tableName,"onUpdate:modelValue":e[0]||(e[0]=r=>o.queryParams.tableName=r),placeholder:"请输入表名称",clearable:"",onKeyup:v(n.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),a(p,{label:"表描述",style:{width:"220px"},prop:"tableComment"},{default:t(()=>[a(g,{modelValue:o.queryParams.tableComment,"onUpdate:modelValue":e[1]||(e[1]=r=>o.queryParams.tableComment=r),placeholder:"请输入表描述",clearable:"",onKeyup:v(n.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),a(p,null,{default:t(()=>[a(u,{type:"primary",onClick:n.handleQuery},{default:t(()=>[a(b,{name:"elementSearch"}),e[3]||(e[3]=d("搜索"))]),_:1},8,["onClick"]),a(u,{onClick:n.resetQuery},{default:t(()=>[a(b,{name:"elementRefresh"}),e[4]||(e[4]=d("重置"))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),a(k,null,{default:t(()=>[h((C(),I(c,{ref:"table",data:o.dbTableList,height:"260px",onRowClick:o.clickRow,onSelectionChange:n.handleSelectionChange},{default:t(()=>[a(l,{type:"selection",width:"55"}),a(l,{prop:"tableName",label:"表名称"}),a(l,{prop:"tableComment",label:"表描述"}),a(l,{prop:"createTime",label:"创建时间"},{default:t(r=>[y("span",null,f(o.dateStrFormat(r.row.createTime)),1)]),_:1}),a(l,{prop:"updateTime",label:"更新时间"},{default:t(r=>[y("span",null,f(o.dateStrFormat(r.row.updateTime)),1)]),_:1})]),_:1},8,["data","onRowClick","onSelectionChange"])),[[P,o.loading]]),h(a(D,{total:o.total,page:o.queryParams.pageIndex,limit:o.queryParams.pageSize,onSizeChange:n.handleSizeChange,onCurrentChange:n.handleCurrentChange},null,8,["total","page","limit","onSizeChange","onCurrentChange"]),[[K,o.total>0]])]),_:1})]),_:1},8,["modelValue"])])}const J=Q(R,[["render",j]]);export{J as default};
